{
  "swagger": "2.0",
  "info": {
    "version": "0.0.1",
    "title": "Master PC API",
    "description": "工位HMI调用"
  },
  "host": "172.17.0.1:8082",
  "basePath": "/rush/v1",
  "schemes": [
    "http"
  ],
  "paths": {
    "/tool-enable": {
      "put": {
        "tags": [
          "HMI"
        ],
        "summary": "工具使能控制",
        "description": "工具使能控制",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/tool_enable"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      }
    },
    "/psets": {
      "put": {
        "tags": [
          "HMI"
        ],
        "summary": "设定拧接程序",
        "description": "设定拧接程序,第一次拧接时(调用成功会返回result_id)，不用传result_id和次数。后续拧接时需要传result_id和拧接次数",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/pset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      },
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "取得控制器pset列表",
        "description": "取得控制器pset列表",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "controller_sn",
            "in": "query",
            "description": "控制器序列号",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              }
            }
          },
          "400": {
            "description": "获取失败"
          }
        }
      }
    },
    "/psets-manual": {
      "put": {
        "tags": [
          "HMI"
        ],
        "summary": "设定拧接程序",
        "description": "设定拧接程序,第一次拧接时(调用成功会返回result_id)，不用传result_id和次数。后续拧接时需要传result_id和拧接次数",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/pset_manual"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      }
    },
    "/pset-detail": {
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "取得控制器pset详情",
        "description": "取得控制器pset详情",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "controller_sn",
            "in": "query",
            "description": "控制器序列号",
            "type": "string",
            "required": true
          },
          {
            "name": "pset",
            "in": "query",
            "description": "pset程序号",
            "type": "integer",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/PsetDetail"
            }
          },
          "400": {
            "description": "失败"
          }
        }
      }
    },
    "/jobs": {
      "put": {
        "tags": [
          "HMI"
        ],
        "summary": "设定装配过程",
        "description": "设定装配过程",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/job"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      },
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "取得控制器job列表",
        "description": "取得控制器job列表",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "controller_sn",
            "in": "query",
            "description": "控制器序列号",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "schema": {
              "type": "array",
              "items": {
                "type": "integer"
              }
            }
          },
          "400": {
            "description": "获取失败"
          }
        }
      }
    },
    "/jobs-manual": {
      "put": {
        "tags": [
          "HMI"
        ],
        "summary": "设定装配过程",
        "description": "设定装配过程",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/job_manual"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      }
    },
    "/job-detail": {
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "取得控制器job详情",
        "description": "取得控制器job详情",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "controller_sn",
            "in": "query",
            "description": "控制器序列号",
            "type": "string",
            "required": true
          },
          {
            "name": "job",
            "in": "query",
            "description": "job号",
            "type": "integer",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/JobDetail"
            }
          },
          "400": {
            "description": "失败"
          }
        }
      }
    },
    "/controller-mode": {
      "put": {
        "tags": [
          "HMI"
        ],
        "summary": "控制模式设置(pset模式/job模式)",
        "description": "控制模式设置",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/jobmode"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      }
    },
    "/io-sets": {
      "put": {
        "tags": [
          "HMI"
        ],
        "summary": "设定控制器的IO输出",
        "description": "在body中可以传入IO状态列表，可以对每个IO进行打开(on)/关闭(off)/闪烁(flashing)等操作",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/ioset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      }
    },
    "/workorder": {
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "根据hmi序列号以及vin或knr取得工单",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "hmi_sn",
            "in": "query",
            "description": "hmi序列号",
            "type": "string",
            "required": false
          },
          {
            "name": "workcenter_code",
            "in": "query",
            "description": "工位序列号",
            "type": "string",
            "required": false
          },
          {
            "name": "code",
            "in": "query",
            "description": "车辆识别号或车辆装配代码",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "返回工单",
            "schema": {
              "$ref": "#/definitions/workorder"
            }
          },
          "400": {
            "description": "获取失败"
          }
        }
      }
    },
    "/next-workorder": {
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "获取下一张工单",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "hmi_sn",
            "in": "query",
            "description": "hmi序列号",
            "type": "string",
            "required": false
          },
          {
            "name": "workcenter_code",
            "in": "query",
            "description": "工位序列号",
            "type": "string",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "返回下张工单",
            "schema": {
              "$ref": "#/definitions/nextWorkorder"
            }
          },
          "400": {
            "description": "获取失败"
          },
          "404": {
            "description": "不存在"
          }
        }
      }
    },
    "/hmi-results": {
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "根据结果id和拧接次数取得对应结果",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "result_id",
            "in": "query",
            "description": "结果id",
            "type": "number",
            "required": true
          },
          {
            "name": "count",
            "in": "query",
            "description": "拧接次数",
            "type": "number",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "返回结果",
            "schema": {
              "$ref": "#/definitions/hmi_result"
            }
          },
          "400": {
            "description": "请求参数错误"
          },
          "404": {
            "description": "结果不存在"
          }
        }
      }
    },
    "/workorders": {
      "post": {
        "tags": [
          "ODOO"
        ],
        "summary": "创建本地工单",
        "description": "创建本地工单",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/WorkorderPost"
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "成功"
          },
          "400": {
            "description": "获取失败"
          }
        }
      },
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "取得工单列表",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "hmi_sn",
            "in": "query",
            "description": "hmi序列号",
            "type": "string",
            "required": false
          },
          {
            "name": "workcenter_code",
            "in": "query",
            "description": "工位序列号",
            "type": "string",
            "required": false
          },
          {
            "name": "status",
            "in": "query",
            "description": "工单状态",
            "type": "string",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "返回工单列表",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/NextWorder"
              }
            }
          },
          "400": {
            "description": "获取失败"
          }
        }
      }
    },
    "/mrp.routing.workcenter.delete": {
      "put": {
        "tags": [
          "ODOO"
        ],
        "summary": "删除本地作业",
        "description": "删除本地作业",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/rod"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      }
    },
    "/results": {
      "get": {
        "tags": [
          "ODOO"
        ],
        "summary": "查询拧接结果",
        "description": "调用此API能够查询缓存在MasterPC中的结果",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "has_upload",
            "in": "query",
            "description": "是否上传",
            "type": "string",
            "required": true
          },
          {
            "name": "result",
            "in": "query",
            "description": "结果值列表",
            "type": "string",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "返回控制器结果",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/result"
              }
            }
          },
          "400": {
            "description": "获取失败"
          }
        }
      }
    },
    "/results/{id}": {
      "patch": {
        "tags": [
          "ODOO"
        ],
        "summary": "修改结果上传标识",
        "description": "调用此API结果的上传标识",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "结果id",
            "type": "integer",
            "required": true
          },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/ResultPatch"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "返回控制器结果",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/result"
              }
            }
          },
          "400": {
            "description": "获取失败"
          }
        }
      }
    },
    "/controller-status": {
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "取得控制器状态",
        "description": "调用此API会返回Master PC下所有控制器的状态",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "controller_sn",
            "in": "query",
            "description": "控制器序列号(多个序列号通过，分隔)",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "返回控制器状态",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/status"
              }
            }
          },
          "400": {
            "description": "获取失败"
          }
        }
      }
    },
    "/healthz": {
      "get": {
        "tags": [
          "HMI"
        ],
        "summary": "心跳检测",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "204": {
            "description": "成功"
          }
        }
      }
    },
    "/operation/{center_code}": {
      "get": {
        "tags": [
          "HMI"
        ],
        "description": "获取某个工位某种车型的作业清单",
        "parameters": [
          {
            "description": "需要获取的工位的代码",
            "default": "测试工位1",
            "required": true,
            "in": "path",
            "type": "string",
            "name": "center_code"
          },
          {
            "description": "需要获取的车型类型",
            "default": "BR24J3",
            "required": false,
            "in": "query",
            "type": "string",
            "name": "carType"
          },
          {
            "description": "job",
            "default": 1,
            "required": false,
            "in": "query",
            "type": "integer",
            "name": "job"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/GeneralOperationDetail"
            }
          }
        }
      }
    },
    "/local-results": {
      "get": {
        "tags": [
          "HMI"
        ],
        "description": "查询本地结果",
        "parameters": [
          {
            "description": "hmi序列号",
            "default": 1122334455667788,
            "required": false,
            "in": "query",
            "type": "string",
            "name": "hmi_sn"
          },
          {
            "description": "字段过滤器(,分隔)",
            "default": "",
            "required": false,
            "in": "query",
            "type": "string",
            "name": "filters"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/LocalResult"
              }
            }
          }
        }
      }
    },
    "/ak2": {
      "post": {
        "tags": [
          "HMI"
        ],
        "description": "放行AK2",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/ak2"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功"
          }
        }
      }
    },
    "/scanner": {
      "put": {
        "tags": [
          "Test"
        ],
        "summary": "scanner",
        "description": "scanner",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/scanner"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      }
    },
    "/input-test": {
      "put": {
        "tags": [
          "Test"
        ],
        "summary": "input-test",
        "description": "input-test",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "#/definitions/input_test"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "设置成功"
          },
          "400": {
            "description": "设置失败"
          }
        }
      }
    }
  },
  "definitions": {
    "pset": {
      "type": "object",
      "properties": {
        "pset": {
          "type": "integer",
          "description": "程序号",
          "example": 1
        },
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "gun_sn": {
          "type": "string",
          "description": "拧紧枪序列号",
          "example": "123456"
        },
        "result_id": {
          "type": "integer",
          "description": "结果id",
          "example": 1
        },
        "count": {
          "type": "integer",
          "description": "第n次拧接(从1开始)",
          "example": 1
        },
        "user_id": {
          "type": "integer",
          "description": "用户id",
          "example": 1
        },
        "workorder_id": {
          "type": "integer",
          "description": "本地工单id",
          "example": 1
        },
        "group_sequence": {
          "type": "integer",
          "description": "点位序号",
          "example": 1
        }
      }
    },
    "pset_manual": {
      "type": "object",
      "properties": {
        "pset": {
          "type": "integer",
          "description": "程序号",
          "example": 1
        },
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "gun_sn": {
          "type": "string",
          "description": "拧紧枪序列号",
          "example": "123456"
        },
        "user_id": {
          "type": "integer",
          "description": "用户id",
          "example": 1
        },
        "car_type": {
          "type": "string",
          "description": "车型编号",
          "example": "CAR123"
        },
        "vin": {
          "type": "string",
          "description": "车辆识别号",
          "example": "LVS123456"
        },
        "hmi_sn": {
          "type": "string",
          "description": "hmi序列号",
          "example": "1122334455667788"
        },
        "count": {
          "type": "integer",
          "description": "拧接次数(0:无限制)",
          "example": 1
        }
      },
      "required": [
        "pset",
        "controller_sn",
        "hmi_sn"
      ]
    },
    "PsetDetail": {
      "type": "object",
      "properties": {
        "pset": {
          "type": "integer",
          "description": "程序号",
          "example": 1
        },
        "pset_name": {
          "type": "string",
          "description": "pset名称",
          "example": "拧紧程序"
        },
        "rotation_direction": {
          "type": "string",
          "description": "拧紧方向",
          "example": "CW",
          "enum": [
            "CW",
            "CCW"
          ]
        },
        "batch_size": {
          "type": "integer",
          "description": "批次数量",
          "example": 1
        },
        "torque_min": {
          "type": "number",
          "description": "最小扭矩",
          "example": 1
        },
        "torque_max": {
          "type": "number",
          "description": "最大扭矩",
          "example": 1
        },
        "torque_target": {
          "type": "number",
          "description": "目标扭矩",
          "example": 1
        },
        "angle_min": {
          "type": "number",
          "description": "最小角度",
          "example": 1
        },
        "angle_max": {
          "type": "number",
          "description": "最大角度",
          "example": 1
        },
        "angle_target": {
          "type": "number",
          "description": "目标角度",
          "example": 1
        }
      }
    },
    "JobStep": {
      "type": "object",
      "properties": {
        "step_name": {
          "type": "string",
          "description": "步骤名称",
          "example": "step1"
        },
        "channel_id": {
          "type": "integer",
          "description": "工具通道号",
          "example": 1
        },
        "pset_id": {
          "type": "integer",
          "description": "pset程序号",
          "example": 1
        },
        "batch_size": {
          "type": "integer",
          "description": "批次数量",
          "example": 1
        },
        "socket": {
          "type": "integer",
          "description": "套筒序号",
          "example": 1
        }
      }
    },
    "JobDetail": {
      "type": "object",
      "properties": {
        "job": {
          "type": "integer",
          "description": "job号",
          "example": 1
        },
        "job_name": {
          "type": "string",
          "description": "job名称",
          "example": "装配过程"
        },
        "order_strategy": {
          "type": "string",
          "description": "顺序策略",
          "example": "forced"
        },
        "count_type": {
          "type": "string",
          "description": "计数类型",
          "example": "only the OK tightenings are counted"
        },
        "lock_at_job_done": {
          "type": "boolean",
          "description": "拧接完成是否锁定",
          "example": true
        },
        "use_line_control": {
          "type": "boolean",
          "description": "是否使用line control",
          "example": false
        },
        "repeat_job": {
          "type": "boolean",
          "description": "是否重复进行job",
          "example": false
        },
        "loosening_strategy": {
          "type": "string",
          "description": "拧松策略",
          "example": "disable"
        },
        "steps": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/JobStep"
          }
        }
      }
    },
    "job": {
      "type": "object",
      "properties": {
        "job_id": {
          "type": "number",
          "description": "装配过程号",
          "example": 1
        },
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "workorder_id": {
          "type": "integer",
          "description": "用户id",
          "example": 1
        },
        "user_id": {
          "type": "integer",
          "description": "用户id",
          "example": 1
        }
      }
    },
    "job_point": {
      "type": "object",
      "properties": {
        "sequence": {
          "type": "integer",
          "description": "点位序号",
          "example": 1
        },
        "pset": {
          "type": "integer",
          "description": "程序号",
          "example": 1
        },
        "offset_x": {
          "type": "number",
          "description": "点位x坐标",
          "example": 100
        },
        "offset_y": {
          "type": "number",
          "description": "点位y坐标",
          "example": 200
        },
        "max_op_time": {
          "type": "integer",
          "description": "最大操作次数",
          "example": 3
        }
      }
    },
    "job_manual": {
      "type": "object",
      "properties": {
        "job_id": {
          "type": "number",
          "description": "装配过程号",
          "example": 1
        },
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "user_id": {
          "type": "integer",
          "description": "用户id",
          "example": 1
        },
        "car_type": {
          "type": "string",
          "description": "车型编号",
          "example": "CAR123"
        },
        "vin": {
          "type": "string",
          "description": "车辆识别号",
          "example": "LVS123456"
        },
        "hmi_sn": {
          "type": "string",
          "description": "hmi序列号",
          "example": "1122334455667788"
        },
        "skip": {
          "type": "boolean",
          "description": "是否空车",
          "example": false
        },
        "has_set": {
          "type": "boolean",
          "description": "job是否已设置",
          "example": false
        },
        "operation_id": {
          "type": "integer",
          "description": "作业id",
          "example": 1
        }
      },
      "required": [
        "job_id",
        "controller_sn",
        "hmi_sn"
      ]
    },
    "jobmode": {
      "type": "object",
      "properties": {
        "mode": {
          "type": "string",
          "description": "控制模式",
          "example": "pset",
          "enum": [
            "pset",
            "job"
          ]
        },
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        }
      }
    },
    "pset_define": {
      "type": "object",
      "properties": {
        "strategy": {
          "type": "string",
          "description": "拧紧策略",
          "example": "AW"
        },
        "M+": {
          "type": "number",
          "description": "最大扭矩(单位nm)",
          "example": 23
        },
        "M-": {
          "type": "number",
          "description": "最小扭矩(单位nm)",
          "example": 2
        },
        "MS": {
          "type": "number",
          "description": "扭矩阈值(单位nm)",
          "example": 2
        },
        "MA": {
          "type": "number",
          "description": "目标扭矩(单位nm)",
          "example": 20
        },
        "W+": {
          "type": "number",
          "description": "最大角度(单位grad)",
          "example": 2
        },
        "W-": {
          "type": "number",
          "description": "最小角度(单位grad)",
          "example": 2
        },
        "WA": {
          "type": "number",
          "description": "目标角度(单位grad)",
          "example": 2
        }
      }
    },
    "result_value": {
      "type": "object",
      "properties": {
        "MI": {
          "type": "number",
          "description": "实际扭矩(单位nm)",
          "example": 20
        },
        "WI": {
          "type": "number",
          "description": "实际角度(单位grad)",
          "example": 20
        },
        "TI": {
          "type": "number",
          "description": "实际时间(单位ms)",
          "example": 20
        }
      }
    },
    "result": {
      "type": "object",
      "properties": {
        "result_id": {
          "type": "integer",
          "description": "结果id",
          "example": 1
        },
        "workorder_id": {
          "type": "integer",
          "description": "对应的工单id",
          "example": 1
        },
        "controller_sn": {
          "type": "string",
          "description": "对应的控制器序列号",
          "example": "string"
        },
        "cur_file": {
          "type": "string",
          "description": "对应的波形文件",
          "example": "cur.json"
        },
        "result": {
          "type": "string",
          "description": "拧紧结果(OK:成功 NOK:失败)",
          "example": "OK"
        },
        "dat": {
          "type": "string",
          "description": "拧接完成时间(yyyy-mm-ddThh:mm:ss+08:00)",
          "example": "2018-04-26T08:31:02+08:00"
        },
        "pset": {
          "type": "integer",
          "description": "对应的程序号",
          "example": 1
        },
        "count": {
          "type": "integer",
          "description": "拧紧次数",
          "example": 1
        },
        "pset_define": {
          "description": "拧接程序定义",
          "$ref": "#/definitions/pset_define"
        },
        "result_value": {
          "description": "拧接结果值",
          "$ref": "#/definitions/result_value"
        }
      }
    },
    "status": {
      "type": "object",
      "properties": {
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "123456"
        },
        "status": {
          "type": "string",
          "description": "控制器状态(online:在线 offline:离线)",
          "example": "online"
        }
      }
    },
    "OrderReulst": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "description": "结果id",
          "example": 1
        },
        "pset": {
          "type": "number",
          "description": "程序号",
          "example": 1
        },
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "gun_sn": {
          "type": "string",
          "description": "拧紧枪序列号",
          "example": "123456"
        },
        "offset_x": {
          "type": "number",
          "description": "点位x坐标",
          "example": 100
        },
        "offset_y": {
          "type": "number",
          "description": "点位y坐标",
          "example": 200
        },
        "max_redo_times": {
          "type": "number",
          "description": "最大重试拧接次数",
          "example": 3
        }
      }
    },
    "workorder": {
      "type": "object",
      "properties": {
        "workorder_id": {
          "type": "integer",
          "description": "工单id",
          "example": 1
        },
        "hmi_sn": {
          "type": "string",
          "description": "hmi序列号",
          "example": "1122334455667788"
        },
        "vin": {
          "type": "string",
          "description": "车辆识别号",
          "example": "LSV2A8CA2JN508198"
        },
        "knr": {
          "type": "string",
          "description": "车辆装配代码",
          "example": "64235375"
        },
        "long_pin": {
          "type": "string",
          "description": "long_pin",
          "example": "64235375"
        },
        "status": {
          "type": "string",
          "description": "工单状态",
          "example": "ready"
        },
        "max_op_time": {
          "type": "number",
          "description": "最大步进时间(秒)",
          "example": 30
        },
        "work_sheet": {
          "type": "string",
          "description": "作业图片(base64编码)"
        },
        "job_id": {
          "type": "integer",
          "description": "装配过程id",
          "example": 1
        },
        "results": {
          "type": "array",
          "description": "结果id列表",
          "items": {
            "$ref": "#/definitions/OrderReulst"
          }
        }
      }
    },
    "nextWorkorder": {
      "type": "object",
      "properties": {
        "vin": {
          "type": "string",
          "description": "车辆识别号",
          "example": "LSV2A8CA2JN508198"
        },
        "knr": {
          "type": "string",
          "description": "车辆装配代码",
          "example": "64235375"
        },
        "long_pin": {
          "type": "string",
          "description": "long_pin",
          "example": "64235375"
        },
        "lnr": {
          "type": "string",
          "description": "车序",
          "example": "0001"
        },
        "model": {
          "type": "string",
          "description": "车型代码",
          "example": "BR24J3"
        }
      }
    },
    "ResultPatch": {
      "type": "object",
      "properties": {
        "has_upload": {
          "type": "boolean",
          "description": "是否已上传",
          "example": true
        }
      }
    },
    "HMI": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "description": "hmi id",
          "example": 1
        },
        "uuid": {
          "type": "string",
          "description": "hmi序列号",
          "example": "sn"
        }
      }
    },
    "Point": {
      "type": "object",
      "properties": {
        "x_offset": {
          "type": "integer",
          "description": "x坐标",
          "example": 1
        },
        "y_offset": {
          "type": "integer",
          "description": "y坐标",
          "example": 1
        }
      }
    },
    "Worksheet": {
      "type": "object",
      "properties": {
        "content": {
          "type": "string",
          "description": "工作图片内容",
          "example": ""
        },
        "points": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Point"
          }
        }
      }
    },
    "WorkorderPost": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "description": "工单id",
          "example": 1
        },
        "status": {
          "type": "string",
          "description": "工单状态",
          "example": "ready"
        },
        "nut_total": {
          "type": "number",
          "description": "螺栓总数",
          "example": 4
        },
        "pset": {
          "type": "string",
          "description": "拧接程序号",
          "example": "1"
        },
        "max_redo_times": {
          "type": "number",
          "description": "最大重试拧接次数",
          "example": 3
        },
        "max_op_time": {
          "type": "number",
          "description": "最大步进时间(秒)",
          "example": 30
        },
        "vin": {
          "type": "string",
          "description": "车辆识别号",
          "example": "LSV2A8CA72N949198"
        },
        "knr": {
          "type": "string",
          "description": "车辆装配代码",
          "example": "6474929"
        },
        "hmi": {
          "$ref": "#/definitions/HMI"
        },
        "worksheet": {
          "$ref": "#/definitions/Worksheet"
        },
        "result_ids": {
          "type": "array",
          "description": "结果id列表",
          "items": {
            "type": "integer"
          }
        }
      }
    },
    "hmi_result": {
      "type": "object",
      "properties": {
        "result_id": {
          "type": "number",
          "description": "结果id",
          "example": 1
        },
        "count": {
          "type": "number",
          "description": "拧接次数",
          "example": 1
        },
        "result": {
          "type": "string",
          "description": "结果值(OK/NOK)",
          "example": 1
        },
        "mi": {
          "type": "number",
          "description": "扭矩(nm)",
          "example": 1
        },
        "wi": {
          "type": "number",
          "description": "角度(deg)",
          "example": 1
        },
        "ti": {
          "type": "number",
          "description": "拧接时间（ms）",
          "example": 1
        }
      }
    },
    "tool_enable": {
      "type": "object",
      "properties": {
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "gun_sn": {
          "type": "string",
          "description": "工具序列号",
          "example": "0001"
        },
        "enable": {
          "type": "boolean",
          "description": "是否使能",
          "example": true
        },
        "reason": {
          "type": "string",
          "description": "使能原因",
          "example": "out of bound"
        }
      },
      "required": [
        "controller_sn",
        "enable"
      ]
    },
    "iostatus": {
      "type": "object",
      "properties": {
        "no": {
          "type": "integer",
          "description": "IO序号，从0开始（CVI3有8个IO输出）",
          "example": 0
        },
        "status": {
          "type": "string",
          "description": "状态(on/off/flashing)",
          "example": "on",
          "enum": [
            "on",
            "off",
            "flashing"
          ]
        }
      }
    },
    "ioset": {
      "type": "object",
      "properties": {
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "io_status": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/iostatus"
          }
        }
      }
    },
    "scanner": {
      "type": "object",
      "properties": {
        "barcode": {
          "type": "string",
          "description": "条码",
          "example": "LFPH4ACB411C02008"
        }
      }
    },
    "input_test": {
      "type": "object",
      "properties": {
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "inputs": {
          "type": "string",
          "description": "输入状态",
          "example": "00000000"
        }
      }
    },
    "GeneralOperationDetail": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "img": {
          "type": "string",
          "description": "作业图片信息(base64)"
        },
        "max_op_time": {
          "type": "integer"
        },
        "job": {
          "type": "integer"
        },
        "points": {
          "items": {
            "$ref": "#/definitions/Generalpoint"
          },
          "type": "array"
        },
        "id": {
          "type": "integer"
        },
        "product_id": {
          "type": "integer"
        }
      }
    },
    "Generalpoint": {
      "type": "object",
      "properties": {
        "pset": {
          "type": "integer"
        },
        "y_offset": {
          "type": "integer",
          "description": "上偏移"
        },
        "x_offset": {
          "type": "integer",
          "description": "左偏移"
        },
        "sequence": {
          "type": "integer",
          "description": "序号"
        },
        "gun_sn": {
          "type": "string",
          "description": "工具序列号"
        }
      }
    },
    "NextWorder": {
      "type": "object",
      "properties": {
        "vin": {
          "type": "string",
          "description": "车辆识别号",
          "example": "LSV2A8CA7JN508198"
        },
        "model": {
          "type": "string",
          "description": "车型代码",
          "example": "BR24J3"
        },
        "long_pin": {
          "type": "string",
          "description": "pin",
          "example": "C6201864735595"
        },
        "knr": {
          "type": "string",
          "description": "knr",
          "example": "64735595"
        },
        "lnr": {
          "type": "string",
          "description": "车序",
          "example": "0001"
        }
      }
    },
    "LocalResult": {
      "type": "object",
      "properties": {
        "hmi_sn": {
          "type": "string",
          "description": "hmi序列号",
          "example": "1122334455667788"
        },
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "gun_sn": {
          "type": "string",
          "description": "工具序列号",
          "example": "123456"
        },
        "result": {
          "type": "string",
          "description": "结果值(OK/NOK)",
          "example": "OK"
        },
        "torque": {
          "type": "number",
          "description": "扭矩(nm)",
          "example": 1
        },
        "angle": {
          "type": "number",
          "description": "角度(deg)",
          "example": 1
        },
        "vin": {
          "type": "string",
          "description": "车辆识别号",
          "example": "LSV2A8CA72N949198"
        },
        "timestamp": {
          "type": "string",
          "description": "拧接完成时间(yyyy-mm-ddThh:mm:ss+08:00)",
          "example": "2018-04-26T08:31:02+08:00"
        },
        "job_id": {
          "type": "number",
          "description": "装配过程号",
          "example": 1
        },
        "batch": {
          "type": "string",
          "description": "批次信息",
          "example": "1/4"
        },
        "vehicle_type": {
          "type": "string",
          "description": "车型代码",
          "example": "CAR111"
        }
      }
    },
    "ak2": {
      "type": "object",
      "properties": {
        "pset": {
          "type": "integer",
          "description": "程序号",
          "example": 1
        },
        "controller_sn": {
          "type": "string",
          "description": "控制器序列号",
          "example": "0001"
        },
        "gun_sn": {
          "type": "string",
          "description": "拧紧枪序列号",
          "example": "123456"
        },
        "workorder_id": {
          "type": "integer",
          "description": "对应的工单id",
          "example": 1
        },
        "count": {
          "type": "integer",
          "description": "拧紧次数",
          "example": 1
        },
        "group_sequence": {
          "type": "integer",
          "description": "序号",
          "example": 1
        }
      }
    },
    "rod": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "description": "作业id",
          "example": 1
        },
        "product_type": {
          "type": "string",
          "description": "车型代码",
          "example": "car"
        }
      }
    }
  }
}